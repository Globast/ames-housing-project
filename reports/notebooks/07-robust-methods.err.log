Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/jupyter_core/utils/__init__.py", line 154, in wrapped
    asyncio.get_running_loop()
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/codespace/.python/current/lib/python3.12/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/home/codespace/.local/lib/python3.12/site-packages/nbclient/client.py", line 1319, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jupyter_core/utils/__init__.py", line 158, in wrapped
    return loop.run_until_complete(inner)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.python/current/lib/python3.12/asyncio/base_events.py", line 684, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/nbclient/client.py", line 709, in async_execute
    await self.async_execute_cell(
  File "/home/codespace/.local/lib/python3.12/site-packages/nbclient/client.py", line 1062, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/home/codespace/.local/lib/python3.12/site-packages/nbclient/client.py", line 918, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
import pandas as pd

# Si bootstrap_df no estÃ¡ en memoria, intenta cargarlo desde BOOT_CSV_PATH
try:
    bootstrap_df  # noqa: F821
except NameError:
    try:
        bootstrap_df = pd.read_csv(BOOT_CSV_PATH)
        print("Cargado bootstrap_df desde:", BOOT_CSV_PATH)
    except Exception as e:
        print("Aviso: no se pudo cargar bootstrap_df automÃ¡ticamente:", e)

# Series y CI de OLS
coef_ols = modelo_base.params
se_ols   = modelo_base.bse
ci_ols   = modelo_base.conf_int()
ic_ols_width = ci_ols.iloc[:, 1] - ci_ols.iloc[:, 0]

# HC3
se_hc3   = resultados_HC3.bse
ci_hc3   = resultados_HC3.conf_int()
ic_hc3_width = ci_hc3.iloc[:, 1] - ci_hc3.iloc[:, 0]

# Normaliza bootstrap_df: Ã­ndice por nombre de tÃ©rmino si existe
if isinstance(bootstrap_df, pd.DataFrame):
    name_cols = [c for c in bootstrap_df.columns if c.lower() in ("term", "variable", "coef_name", "feature")]
    if name_cols:
        bootstrap_df = bootstrap_df.set_index(name_cols[0])

    # Mapeo de columnas esperadas (ajÃºstalo si tus nombres difieren)
    col_mean = "Coef_mean"
    col_se   = "SE_bootstrap"
    col_l    = "IC_2.5%"
    col_u    = "IC_97.5%"

    # Series desde bootstrap
    coef_boot_mean = bootstrap_df[col_mean] if col_mean in bootstrap_df.columns else pd.Series(dtype=float)
    se_boot        = bootstrap_df[col_se]   if col_se   in bootstrap_df.columns else pd.Series(dtype=float)
    if {col_l, col_u}.issubset(bootstrap_df.columns):
        ic_boot_width = bootstrap_df[col_u] - bootstrap_df[col_l]
    else:
        ic_boot_width = pd.Series(dtype=float)

    # Alinea con el orden de coef_ols
    coef_boot_mean = coef_boot_mean.reindex(coef_ols.index)
    se_boot        = se_boot.reindex(coef_ols.index)
    ic_boot_width  = ic_boot_width.reindex(coef_ols.index)
else:
    coef_boot_mean = pd.Series(dtype=float, index=coef_ols.index)
    se_boot        = pd.Series(dtype=float, index=coef_ols.index)
    ic_boot_width  = pd.Series(dtype=float, index=coef_ols.index)

# DataFrame comparativo
comparative_df = pd.DataFrame({
    "Coef_OLS": coef_ols,
    "Coef_Bootstrap": coef_boot_mean,
    "SE_OLS": se_ols,
    "SE_HC3": se_hc3.reindex(coef_ols.index),
    "SE_Bootstrap": se_boot,
    "IC_width_OLS": ic_ols_width,
    "IC_width_HC3": ic_hc3_width.reindex(coef_ols.index),
    "IC_width_Bootstrap": ic_boot_width,
})

# Subconjuntos Ãºtiles
coef_df = comparative_df[["Coef_OLS", "Coef_Bootstrap"]]
se_df   = comparative_df[["SE_OLS", "SE_HC3", "SE_Bootstrap"]]
ic_df   = comparative_df[["IC_width_OLS", "IC_width_HC3", "IC_width_Bootstrap"]]

# Vista rÃ¡pida
comparative_df.head()
------------------

----- stdout -----
Cargado bootstrap_df desde: ../data/bootstrap_results.csv
------------------

[31m---------------------------------------------------------------------------[39m
[31mNameError[39m                                 Traceback (most recent call last)
[36mCell[39m[36m [39m[32mIn[3][39m[32m, line 14[39m
[32m     11[39m         [38;5;28mprint[39m([33m"[39m[33mAviso: no se pudo cargar bootstrap_df automÃ¡ticamente:[39m[33m"[39m, e)
[32m     13[39m [38;5;66;03m# Series y CI de OLS[39;00m
[32m---> [39m[32m14[39m coef_ols = [43mmodelo_base[49m.params
[32m     15[39m se_ols   = modelo_base.bse
[32m     16[39m ci_ols   = modelo_base.conf_int()

[31mNameError[39m: name 'modelo_base' is not defined

